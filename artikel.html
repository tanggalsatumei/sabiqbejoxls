<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Artikel | Sabiq Bejo</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <header>
    <div class="header-bar">
      <a href="index.html" class="btn">â¬… Kembali</a>
      <h1>Artikel</h1>
    </div>
  </header>

  <main style="max-width:800px;margin:20px auto;padding:0 16px">
    <article id="articleContent">
      <h2>Judul Artikel</h2>
      <img id="articleImage" src="" alt="" style="width:100%;border-radius:8px;margin:12px 0">
      <div id="articleBody" style="line-height:1.6"></div>
    </article>

    <section id="related">
      <h3>Artikel Terkait</h3>
      <ul id="relatedList"></ul>
    </section>
  </main>

  <script>
  const API_URL = "https://script.google.com/macros/s/AKfycbw7z-KG3qwpi8-AkrMPGg2ONX_gWwepiN7oKPiAcx6n_fVBjASLZ79IMxsuV99tUisCwg/exec";
  const API_TOKEN = "1_sE-EY0hPXT_mQBg7sifRUoDAon6DvQNQZcUsrwnD0A";

  async function fetchSheet(name){
    const res = await fetch(`${API_URL}?sheet=${name}&token=${API_TOKEN}`);
    return (await res.json()).data || [];
  }

  function getParam(name){
    const url = new URL(window.location.href);
    return url.searchParams.get(name);
  }

  (async function(){
    const slug = getParam("slug");
    const rows = await fetchSheet("Artikel");
    const art = rows.find(r=>r.slug===slug);
    if(art){
      document.querySelector("h2").textContent = art.judul;
      document.getElementById("articleImage").src = art.gambar;
      document.getElementById("articleBody").innerHTML = art.isi || art.deskripsi;
    }

    // artikel terkait (acak)
    const related = rows.filter(r=>r.slug!==slug).sort(()=>Math.random()-0.5).slice(0,3);
    const list = document.getElementById("relatedList");
    related.forEach(r=>{
      const li = document.createElement("li");
      li.innerHTML = `<a href="artikel.html?slug=${r.slug}">${r.judul}</a>`;
      list.appendChild(li);
    });
  })();
  </script>
</body>
</html>
